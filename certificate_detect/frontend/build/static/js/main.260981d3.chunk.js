(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(17),l=a.n(r);a(53),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(2),o=a(3),i=a(5),u=a(4),m=(a(54),a(55),a(56),a(57),a(58),a(59),a(60),a(61),a(16)),p=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).cancel=function(){e.props.toggleAlerts()},e}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"alert-message"},s.a.createElement("p",null,this.props.message),s.a.createElement("button",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"),s.a.createElement("button",{onClick:this.cancel},"\u041e\u0442\u043c\u0435\u043d\u0430"))}}]),a}(n.Component),d=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={selected_filter:null,alert:!1,alert_message:"",keys:[]},e.downloadUserList=function(){console.log("TODO : download user list")},e.onFilterChange=function(t){e.setState({selected_filter:t.target.id})},e.toggleAlerts=function(t){0==t.length&&e.setState({alert:!e.state.alert,alert_message:t})},e.renderFilterMenu=function(){if(e.props.filter_menu_state){var t={background:"white",color:"#38455b"};return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"filter-menu"},s.a.createElement("p",null,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b:"),s.a.createElement("div",null,s.a.createElement("button",{onClick:e.onFilterChange,id:"1",style:"1"==e.state.selected_filter?t:null},"\u0424\u0438\u043b\u044c\u0442\u0440 1"),s.a.createElement("button",{onClick:e.onFilterChange,id:"2",style:"2"==e.state.selected_filter?t:null},"\u0424\u0438\u043b\u044c\u0442\u0440 2"),s.a.createElement("button",{onClick:e.onFilterChange,id:"3",style:"3"==e.state.selected_filter?t:null},"\u0424\u0438\u043b\u044c\u0442\u0440 3"),s.a.createElement("button",{onClick:e.onFilterChange,id:"4",style:"4"==e.state.selected_filter?t:null},"\u0424\u0438\u043b\u044c\u0442\u0440 4"),s.a.createElement("button",{onClick:e.onFilterChange,id:"5",style:"5"==e.state.selected_filter?t:null},"\u0424\u0438\u043b\u044c\u0442\u0440 5"))))}return null},e.renderKeys=function(){return e.state.keys.map((function(t){return s.a.createElement(n.Fragment,null,s.a.createElement("p",null,t,s.a.createElement("i",{className:"fas fa-times",onClick:function(){e.removeKeyword(t)}})))}))},e.removeKeyword=function(t){var a=e.state.keys,n=a.indexOf(t);n>-1&&a.splice(n,1),e.setState({keys:a})},e.onInputChange=function(t){var a=t.target.value;" "===a?t.target.value="":" "===a[a.length-1]&&(t.target.value="",e.setState({keys:[].concat(Object(m.a)(e.state.keys),[a.substring(0,a.length-1)])}))},e.onInputSubmit=function(t){if(13===t.keyCode){var a=e.state.keys.map((function(e){return e+" "}));alert("\u0411\u0443\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043b\u043e\u0432\u0430\u043c: "+a)}},e}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"search"},s.a.createElement("p",null,s.a.createElement("i",{className:"fas fa-search"})),s.a.createElement("div",{className:"keywords"},this.renderKeys()),s.a.createElement("input",{onKeyUp:this.onInputSubmit,onSubmit:this.onInputChange,onChange:this.onInputChange})),s.a.createElement("button",{title:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",id:"download-users",onClick:this.downloadUserList},s.a.createElement("p",null,s.a.createElement("i",{className:"fas fa-file-download"})),s.a.createElement("div",{className:"highlight"})),s.a.createElement("button",{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432",id:"filters",onClick:this.props.toggleFilterMenu},s.a.createElement("p",null,s.a.createElement("i",{className:"fas fa-clipboard-list"})),s.a.createElement("div",{className:"highlight"}))),this.renderFilterMenu(),this.state.alert?s.a.createElement(p,{toggleAlerts:this.toggleAlerts}):null)}}]),a}(n.Component),f=a(9),h=(a(26),a(6)),g=a.n(h),_="http://80.89.204.142:14289/api/",E=function(e,t){return function(e){g.a.ajax({url:_+"get_all_clusters",type:"GET",dataType:"jsonp"}).done((function(t){e({type:"GET_CLUSTERS",payload:t.response})}))}},v=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={groups:[],selected_group:null},e.refreshGroup=function(t){e.props.getGroupStatus()},e.selectGroup=function(e){},e.renderGroups=function(){var t=e.props.groups;return Object.keys(t).map((function(a){var r=t[a],l={width:224*(parseInt(r.status.substring(0,r.status.length-1))/100)+"px"};return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"group-line"},s.a.createElement("button",{className:"group-name",title:r.name,onClick:function(){return e.selectGroup(r.id)}},r.name),s.a.createElement("div",{className:"progress"},s.a.createElement("div",{className:"bar",style:l})),s.a.createElement("button",{onClick:function(){return e.refreshGroup(r.id)}},s.a.createElement("i",{className:"fas fa-sync-alt"}))))}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.getGroupStatus()}},{key:"componentWillReceiveProps",value:function(e){this.props.current_clusters!=e.current_clusters&&this.props.setGroupData(e.current_clusters)}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"left-panel"},s.a.createElement("div",{className:"panel-body"},s.a.createElement("button",{id:"close",onClick:this.props.toggleLeftPanel},s.a.createElement("i",{className:"fas fa-times"})),s.a.createElement("p",{className:"title"},"\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),s.a.createElement("div",{className:"groups"},s.a.createElement("p",{className:"block-title"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b"),this.renderGroups()),s.a.createElement("div",{className:"new-request"},s.a.createElement("p",{className:"block-title"},"\u041d\u043e\u0432\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437"),s.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b:"),s.a.createElement("input",null),s.a.createElement("label",null,"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445:"),s.a.createElement("select",{defaultValue:"1"},s.a.createElement("option",{value:"1",key:"1"},"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),s.a.createElement("option",{value:"2",key:"2"},"\u0422\u0435\u043a\u0441\u0442")),s.a.createElement("label",{className:"data"},"\u0414\u0430\u043d\u043d\u044b\u0435:"),s.a.createElement("textarea",null),s.a.createElement("button",{className:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))}}]),a}(n.Component),b={getGroupStatus:function(){return function(e){g.a.ajax({url:_+"get_status",type:"GET",dataType:"jsonp"}).done((function(t){e({type:"GET_GROUP_STATUS",payload:t.response})}))}}},y=Object(f.b)((function(e){return{groups:e.clusters.group_status}}),b)(v),k=a(21),O=a(22),j=a.n(O);a(83);var N=function(){return function(e){var t=window.location.search;e({type:"SET_CODE",payload:new URLSearchParams(t).get("code")})}},C=function(){return function(e){e({type:"CHECK_TOKEN",payload:null})}};Array.prototype.unique=function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var a=t+1;a<e.length;++a)e[t]===e[a]&&e.splice(a--,1);return e};var w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={elements_on_page:14,page_number:1,number_of_clusters:null,selected_clusters:[],opened_cluster:null,current_page:[],code:null},e.onChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.selectCluster=function(t){if(e.props.getCtrl()){var a=parseInt(t.cluster_id),n=e.state.selected_clusters;if(n.includes(a)){var s=n.indexOf(a);s>-1&&n.splice(s,1)}else n.push(a);e.setState({selected_clusters:n})}else e.props.openCluster(t),e.setState({opened_cluster:t.cluster_id})},e.renderData=function(){return e.props.current_group_data.length?e.props.current_group_data.map((function(t){var a=!!e.state.selected_clusters.includes(t.cluster_id),n=(e.props.cluster_panel_state?e.props.opened_cluster:null)==t.cluster_id,r=a?{}:{visibility:"hidden"},l=a?{boxShadow:"none"}:{},c=t.certificates.length,o=t.certificates[0].image_url;return s.a.createElement("div",{key:t.cluster_id,className:"tile",style:l,onClick:function(){return e.selectCluster(t)}},s.a.createElement("div",{className:"counter"},n?s.a.createElement("i",{class:"far fa-eye",style:{fontSize:"11pt"}}):a?s.a.createElement("i",{class:"fas fa-check",style:{fontSize:"8pt"}}):c),s.a.createElement("div",{className:"meta-data"},"\u041d\u0430\u0431\u043e\u0440 #",t.cluster_id),s.a.createElement("div",{className:"thumbnail",style:{backgroundImage:'url("'+o+'")'}}),s.a.createElement("div",{className:"selected",style:r}))})):null},e.selectAll=function(){e.state.selected_clusters.length!=e.props.current_group_data.length?e.setState({selected_clusters:e.props.current_group_data.map((function(e){return e.cluster_id}))}):e.setState({selected_clusters:[]})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.getClusters()}},{key:"componentWillReceiveProps",value:function(e){this.props.current_group_data!=e.current_group_data&&this.setState({number_of_clusters:e.current_group_data.length})}},{key:"render",value:function(){if(this.props.current_group_data.length){var e=this.props.current_group_data.length==this.state.selected_clusters.length;return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"tiles-workspace"},s.a.createElement("div",{className:"tiles"},this.renderData()),s.a.createElement("button",{id:"select-all-clusters",onClick:this.selectAll},e?s.a.createElement("span",null,s.a.createElement("i",{className:"far fa-check-circle"})):s.a.createElement("span",null,s.a.createElement("i",{className:"far fa-circle"}))," \u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0432\u0441\u0435")))}return null}}]),a}(n.Component),S={getClusters:E,setCode:N},x=Object(f.b)((function(e){return{data:e.clusters.all,code:e.login.code}}),S)(w),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={selected_items:[],items:[],cluster:{},current_item:{}},e.selectItem=function(t){if(e.props.getCtrl()){var a=parseInt(t.id),n=e.state.selected_items;if(n.includes(a)){var s=n.indexOf(a);s>-1&&n.splice(s,1)}else n.push(a);e.setState({selected_items:n})}else e.props.openImage(t),e.setState({current_item:t})},e.selectAllItems=function(){e.state.selected_items.length==e.state.items.length?e.setState({selected_items:[]}):e.setState({selected_items:e.state.items.map((function(e){return e.id}))})},e.nextItem=function(){var t=e.state.current_item,a=e.state.items,n=a.indexOf(t);n+1===a.length?(e.props.openImage(a[0]),e.setState({current_item:a[0]})):(e.props.openImage(a[n+1]),e.setState({current_item:a[n+1]}))},e.prevItem=function(){var t=e.state.current_item,a=e.state.items,n=a.indexOf(t);n-1<0?(e.props.openImage(a[a.length-1]),e.setState({current_item:a[a.length-1]})):(e.props.openImage(a[n-1]),e.setState({current_item:a[n-1]}))},e.renderItems=function(){return e.state.items.map((function(t){var a=e.state.selected_items.includes(t.id)?{}:{visibility:"hidden"};return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"item",onClick:function(){return e.selectItem(t)}},s.a.createElement("div",{className:"thumbnail",style:{backgroundImage:'url("'+t.image_url+'")'}}),s.a.createElement("div",{className:"item-highlight",style:a},s.a.createElement("p",null,s.a.createElement("i",{class:"fas fa-check"})))))}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({cluster:this.props.cluster,items:this.props.cluster.certificates})}},{key:"componentWillReceiveProps",value:function(e){this.props.cluster!=e.cluster&&this.setState({cluster:e.cluster,items:e.cluster.certificates})}},{key:"render",value:function(){var e=this.state.selected_items.length==this.state.items.length;return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"right-panel"},s.a.createElement("div",{className:"panel-body"},s.a.createElement("button",{id:"close",onClick:this.props.closeCluster},s.a.createElement("i",{className:"fas fa-times"})),s.a.createElement("p",{className:"title"},"\u041d\u0430\u0431\u043e\u0440 \u2116",this.state.cluster.cluster_id),s.a.createElement("button",{class:"select-all-items",onClick:this.selectAllItems},e?s.a.createElement("span",null,s.a.createElement("i",{className:"far fa-check-circle"})):s.a.createElement("span",null,s.a.createElement("i",{className:"far fa-circle"}))," \u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0432\u0441\u0435"),s.a.createElement("div",{className:"clusters"},s.a.createElement("p",{className:"block-title"},"\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043e: ",this.state.selected_items.length),s.a.createElement("div",{className:"items"},this.renderItems())))),this.props.slide_state?s.a.createElement(n.Fragment,null,s.a.createElement("button",{onClick:this.nextItem,className:"item-nav",id:"right"},s.a.createElement("i",{className:"fas fa-arrow-right"})),s.a.createElement("button",{onClick:this.prevItem,className:"item-nav",id:"left"},s.a.createElement("i",{className:"fas fa-arrow-left"}))):null)}}]),a}(n.Component),I=function(e,t){return function(a){g.a.ajax({url:"https://api.vk.com/method/users.get?user_ids="+t+"&fields=photo_200&access_token="+e+"&v=5.122",type:"GET",dataType:"jsonp"}).done((function(e){a({type:"GET_USER",payload:e})}))}},A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={url:"",text_data:[],text_blocks:[],selected_block:{id:null,h:null,w:null}},e.renderTextData=function(){var t=e.state.text_blocks;return void 0!=t?t.map((function(t){var a=40*t.h>.7?40*t.h:.7,n={fontSize:(a=a>1.2?1.2:a)+"em"};return e.state.selected_block.id===t.y?(n.height=e.state.selected_block.h,s.a.createElement("textarea",{onChange:e.onTextAreaChange,name:t.y,style:n},t.text)):s.a.createElement("p",{onClick:function(a){e.selectBlock(a,t.y)},style:n}," ",t.text)})):null},e.selectBlock=function(t,a){e.setState({selected_block:{id:a,h:g()(t.target).height(),w:g()(t.target).width()}})},e.onTextAreaChange=function(t){var a=t.target.name,n=t.target.value,s=e.state.text_blocks,r=s.findIndex((function(e){return e.y+""==a})),l=s[r];l.text=n,console.log(l),s[r]=l,e.setState({text_blocks:s})},e.transformTextBlocks=function(e){var t={};e.map((function(e){var a=Number(e.h),n=Number(e.w),s=Number(e.x),r=Number(e.y),l=e.text;if(0==Object.keys(t).length)t[r]=[],t[r]=[].concat(Object(m.a)(t[r]),[{h:a,w:n,x:s,y:r,text:l}]);else for(var c=0;c<Object.keys(t).length;c++){var o=Object.keys(t)[c];if(Math.abs(o-r)<.07&&Math.abs(a-t[o][0].h)<.02){t[o]=[].concat(Object(m.a)(t[o]),[{h:a,w:n,x:s,y:r,text:l}]);break}if(c==Object.keys(t).length-1){t[r]=[],t[r]=[].concat(Object(m.a)(t[r]),[{h:a,w:n,x:s,y:r,text:l}]);break}}}));var a=[];return Object.keys(t).map((function(e){var n=t[e],s="";n.map((function(e){s=s+e.text+" "}));var r={h:n[0].h,w:n[0].w,x:n[0].x,y:n[0].y,text:s};a.push(r)})),a},e.saveTextBlocks=function(){var t=e.state.text_blocks.filter((function(e){return e.text.length>0}));e.props.updateCertificateBlocks(e.props.item.id,t)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){g()(".slide-image").on("load",(function(){g()(".text-data").width(g()(".slide-image").width()),g()(".text-data").height(g()(".slide-image").height())})),g()(window).resize((function(){g()(".text-data").width(g()(".slide-image").width()),g()(".text-data").height(g()(".slide-image").height())})),this.props.getUser(this.props.token.access_token,this.props.item.user_id),this.setState({text_blocks:this.transformTextBlocks(this.props.item.text_blocks)})}},{key:"render",value:function(){var e=this;return s.a.createElement(n.Fragment,null,Object.keys(this.props.item).length?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"slide",onClick:function(){return e.props.closeImage()}}),s.a.createElement("div",{className:"data"},s.a.createElement("div",{className:"container"},Object.keys(this.props.user).length?s.a.createElement("div",{className:"slide-user-info"},s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vk.com/id"+this.props.item.user_id},s.a.createElement("img",{className:"user-photo",src:this.props.user.response[0].photo_200})),s.a.createElement("p",null,this.props.user.response[0].first_name," ",this.props.user.response[0].last_name),s.a.createElement("p",null,"ID \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ",this.props.item.user_id),s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vk.com/id"+this.props.item.user_id},"https://vk.com/id"+this.props.item.user_id),s.a.createElement("p",null,"\u041f\u043e\u0441\u0442:"),s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vk.com/wall"+this.props.item.user_id+"_"+this.props.item.post_id},"https://vk.com/wall"+this.props.item.user_id+"_"+this.props.item.post_id)):null,s.a.createElement("img",{className:"slide-image",src:this.props.item.image_url})),s.a.createElement("div",{className:"container"},s.a.createElement("button",{onClick:this.saveTextBlocks,className:"save-text-blocks"},s.a.createElement("i",{className:"far fa-save"}),"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),s.a.createElement("div",{className:"text-data"},this.renderTextData()))),s.a.createElement("button",{id:"close-slide",onClick:this.props.closeImage},s.a.createElement("i",{className:"fas fa-times"}))):null)}}]),a}(n.Component),F={getUser:I,updateCertificateBlocks:function(e,t){return function(a){var n={certificate_id:e,text_blocks:t};g.a.ajax({url:_+"update_cetrificate_blocks",type:"GET",data:n,dataType:"jsonp"}).done((function(e){a({type:"UPDATE_CERTIFICATE_BLOCKS",payload:e.response})}))}}},G=Object(f.b)((function(e){return{user:e.walls.user,token:e.login.token}}),F)(A),U=a(19),D=a(8),L=a(18),P=a.n(L),B=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={left_panel_state:!1,cluster_panel_state:!1,filter_menu_state:!1,ctrl:!1,current_cluster:[],current_slide_item:{},slide_state:!1,quant:0,current_group_data:[]},e.toggleLeftPanel=function(){e.setState({left_panel_state:!e.state.left_panel_state})},e.toggleFilterMenu=function(){console.log("1"),e.setState({filter_menu_state:!e.state.filter_menu_state})},e.ctrlDown=function(){e.state.ctrl||e.setState({ctrl:!0})},e.ctrlUp=function(){e.state.ctrl&&e.setState({ctrl:!1})},e.getCtrl=function(){return e.state.ctrl},e.openCluster=function(t){e.setState({cluster_panel_state:!0,current_cluster:t})},e.closeCluster=function(){e.setState({current_cluster:[],cluster_panel_state:!1})},e.getClusterPanelState=function(){return e.state.cluster_panel_state},e.openImage=function(t){e.setState({current_slide_item:t,slide_state:!0})},e.closeImage=function(){e.setState({current_slide_item:{},slide_state:!1})},e.closePanels=function(){e.setState({left_panel_state:!1,cluster_panel_state:!1,filter_menu_state:!1})},e.setGroupData=function(t){e.setState({current_group_data:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("loading").style.visibility="hidden",this.props.checkToken(),this.props.getClusters()}},{key:"render",value:function(){var e=this;return s.a.createElement(n.Fragment,null,s.a.createElement(j.a,{handleKeys:["ctrl"],handleEventType:"keydown",onKeyEvent:function(t,a){return e.ctrlDown()}}),s.a.createElement(j.a,{handleKeys:["ctrl"],handleEventType:"keyup",onKeyEvent:function(t,a){return e.ctrlUp()}}),this.state.left_panel_state?null:s.a.createElement("button",{title:"\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",id:"toggle-left-panel",onClick:this.toggleLeftPanel},s.a.createElement("p",null,s.a.createElement("i",{className:"fas fa-chart-pie"})),s.a.createElement("div",{className:"highlight"})),s.a.createElement(d,{toggleFilterMenu:this.toggleFilterMenu,filter_menu_state:this.state.filter_menu_state}),this.state.slide_state?s.a.createElement(G,{closeImage:this.closeImage,item:this.state.current_slide_item}):null,s.a.createElement(x,{current_group_data:this.props.display_data,getCtrl:this.getCtrl,opened_cluster:this.state.current_cluster.cluster_id,openCluster:this.openCluster,cluster_panel_state:this.state.cluster_panel_state}),this.state.left_panel_state?s.a.createElement(y,{setGroupData:this.setGroupData,toggleLeftPanel:this.toggleLeftPanel}):null,this.state.cluster_panel_state?s.a.createElement(T,{openImage:this.openImage,getCtrl:this.getCtrl,closeCluster:this.closeCluster,quant:this.state.quant,cluster:this.state.current_cluster,slide_state:this.state.slide_state}):null,s.a.createElement("div",{className:"closePanels",onClick:this.closePanels}))}}]),a}(n.Component),M={checkToken:C,getClusters:E},K=Object(f.b)((function(e){return{token:e.login.token,display_data:e.clusters.selected}}),M)(B),R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("loading").style.visibility="hidden"}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"background",style:{backgroundImage:'url("'+P.a+'")'}}),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"logo"}),s.a.createElement("p",{className:"head"},"\u0420\u043e\u0441\u0442 \u0442\u0440\u0430\u0444\u0438\u043a\u0430 / \u0410\u043d\u0430\u043b\u0438\u0437 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438"),s.a.createElement("p",{className:"mini-text"},"\u041d\u0430\u0431\u043e\u0440 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u043f\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438 ",s.a.createElement("br",null),"\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u043c\u0435\u043d\u0442\u0430 "),s.a.createElement("p",{className:"link",onClick:this.props.handleLogin},"\u0412\u043e\u0439\u0442\u0438")))}}]),a}(n.Component),W={handleLogin:function(){return function(e){var t={client_id:7560681,display:"page",redirect_uri:"http://cluster-management.herokuapp.com/service-list",response_type:"token",scope:"friends",v:"5.122"},n="https://oauth.vk.com/authorize?"+a(41).stringify(t);window.location.replace(n)}}},z=Object(f.b)((function(e){return{user:e.login.name}}),W)(R),q=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("loading").style.visibility="hidden",this.props.setToken()}},{key:"componentDidUpdate",value:function(e){this.props.token!=e.token&&this.props.getAccountInfo(this.props.token)}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"background",style:{backgroundImage:'url("'+P.a+'")'}}),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"logo"}),s.a.createElement("p",{className:"service-list-head"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432"),s.a.createElement("div",{className:"service-list"},s.a.createElement(U.b,{to:"/workspace"},s.a.createElement("p",{className:"service-link"},"\u0410\u043d\u0430\u043b\u0438\u0437 \u0433\u0440\u0443\u043f\u043f \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435")),s.a.createElement(U.b,{to:"/parser"},s.a.createElement("p",{className:"service-link"},"\u0411\u0430\u043d\u043a \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043e\u0432")))))}}]),a}(n.Component),H={setCode:N,setToken:function(){return function(e){var t=window.location.href;t=t.replace("#","?");var a=new URL(t),n=new URLSearchParams(a.search);e({type:"SET_TOKEN",payload:{access_token:n.get("access_token"),expires_in:n.get("expires_in"),user_id:n.get("user_id")}})}},getAccountInfo:function(e){return function(t){g.a.ajax({url:"https://api.vk.com/method/users.get?user_ids="+e.user_id+"&fields=photo_200&access_token="+e.access_token+"&v=5.122",type:"GET",dataType:"jsonp"}).done((function(e){t({type:"GET_ACCOUNT_INFO",payload:e.response[0]})}))}}},J=Object(f.b)((function(e){return{code:e.login.code,token:e.login.token,account_info:e.login.account_info}}),H)(q),V=a(15),$=a(44),Q=a(45),X=a(7),Y={all:[],selected:[],group_status:{},update_block_status:{},search_result:[]},Z={name:"",error:"",token:null,account_info:{}};function ee(){var e={client_id:7560681,display:"page",redirect_uri:"http://cluster-management.herokuapp.com/service-list",response_type:"token",scope:"friends",v:"5.122"},t="https://oauth.vk.com/authorize?"+a(41).stringify(e);window.location.replace(t)}var te={selected:{},user:{}},ae=Object(V.combineReducers)({clusters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CLUSTERS":return Object(X.a)(Object(X.a)({},e),{},{selected:t.payload});case"GET_GROUP_STATUS":return Object(X.a)(Object(X.a)({},e),{},{group_status:t.payload});case"UPDATE_CERTIFICATE_BLOCKS":return Object(X.a)(Object(X.a)({},e),{},{update_block_status:t.payload});case"SEARCH":return Object(X.a)(Object(X.a)({},e),{},{search_result:t.payload});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(X.a)(Object(X.a)({},e),{},{name:t.payload,error:""});case"LOGIN_FAIL":return Object(X.a)(Object(X.a)({},e),{},{error:t.payload.message});case"SET_CODE":return Object(X.a)(Object(X.a)({},e),{},{code:t.payload});case"GET_TOKEN":return e;case"SET_TOKEN":return Object(X.a)(Object(X.a)({},e),{},{token:t.payload});case"GET_ACCOUNT_INFO":return Object(X.a)(Object(X.a)({},e),{},{account_info:t.payload});case"CHECK_TOKEN":if(null!=e.token)return e;ee();default:return e}},walls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_WALL":return Object(X.a)(Object(X.a)({},e),{},{selected:t.payload});case"GET_USER":return Object(X.a)(Object(X.a)({},e),{},{user:t.payload});default:return e}}}),ne=[Q.a],se=Object(V.createStore)(ae,{},Object($.composeWithDevTools)(V.applyMiddleware.apply(void 0,ne))),re=(a(87),a(46)),le=a.n(re),ce=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={post_link:"",posts:[],show_all_posts:[]},e.handleParse=function(){},e.onChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.submitPostByLink=function(){document.getElementById("post_input").value="";var t=e.state.post_link;if(t.indexOf("-")>0){var a=t.split("-")[1];e.props.getWall(e.props.token.access_token,"-"+a,!1)}else if(t.indexOf("wall")>0){var n=t.split("wall")[1].split("?")[0];e.props.getWall(e.props.token.access_token,n,!0)}else alert("\u0414\u0430\u043d\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0435 \u0432\u0435\u0434\u0435\u0442 \u043d\u0430 \u043f\u043e\u0441\u0442")},e.renderPosts=function(){return e.state.posts.reverse().map((function(t){var a=t.owner_data.response[0],r=t.post_data.response[0];console.log(r);var l=r.from_id+"_"+r.id,c="https://vk.com/wall"+l,o="",i="";void 0==a.first_name?(o=a.name,i=a.photo_200):(o=a.first_name+" "+a.last_name,i=a.photo_50);var u=void 0===r.views?null:r.views.count,m={},p=!0;return r.text.length>250&&(m=(p=!e.state.show_all_posts.includes(l))?{height:"150px",overflow:"hidden"}:{}),s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"post"},s.a.createElement("div",{className:"post-header"},s.a.createElement("img",{src:i}),s.a.createElement("p",{className:"name"},s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c},o))),s.a.createElement("div",{className:"post-body"},s.a.createElement("div",{className:"text",style:m},s.a.createElement(le.a,null,r.text)),p?s.a.createElement("p",{id:"show-all",onClick:function(){e.showAll(l)}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e..."):null,s.a.createElement("div",{className:"attachments"},e.renderAttachments(r.attachments))),s.a.createElement("div",{className:"post-footer"},s.a.createElement("p",{className:"likes"},s.a.createElement("i",{class:"fas fa-heart"})," ",r.likes.count),s.a.createElement("p",{className:"reposts"},s.a.createElement("i",{class:"fas fa-retweet"})," ",r.reposts.count),s.a.createElement("p",{className:"comments"},s.a.createElement("i",{class:"fas fa-comment-alt"})," ",r.comments.count),s.a.createElement("p",{className:"views"},s.a.createElement("i",{class:"fas fa-eye"})," ",u))))}))},e.showAll=function(t){e.setState({show_all_posts:[].concat(Object(m.a)(e.state.show_all_posts),[t])})},e.renderAttachments=function(e){return void 0!=e?e.map((function(e){return"doc"==e.type?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"doc"},s.a.createElement("a",{href:e.doc.url},s.a.createElement("img",{src:e.doc.url})))):"photo"==e.type?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"photo"},s.a.createElement("img",{src:e.photo.sizes[4].url}))):null})):null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("loading").style.visibility="hidden",this.props.checkToken()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.new_post!=e.new_post){var t=e.new_post;this.setState({posts:[].concat(Object(m.a)(this.state.posts),[t])})}}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"add-new-post"},s.a.createElement("input",{id:"post_input",name:"post_link",onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c"}),s.a.createElement("button",{id:"submit_post",onClick:this.submitPostByLink},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c")),s.a.createElement("div",{className:"post-container"},this.renderPosts()))}}]),a}(n.Component),oe={getWall:function(e,t,a){return function(n){g.a.ajax({url:"https://api.vk.com/method/wall.getById?posts="+t+"&access_token="+e+"&v=5.122",type:"GET",dataType:"jsonp"}).done((function(t){var s=t.response[0].owner_id;a?g.a.ajax({url:"https://api.vk.com/method/users.get?user_ids="+s+"&fields=photo_50&access_token="+e+"&v=5.122",type:"GET",dataType:"jsonp"}).done((function(e){n({type:"GET_WALL",payload:{post_data:t,owner_data:e}})})):g.a.ajax({url:"https://api.vk.com/method/groups.getById?group_id="+-1*s+"&access_token="+e+"&v=5.122",type:"GET",dataType:"jsonp"}).done((function(e){n({type:"GET_WALL",payload:{post_data:t,owner_data:e}})}))}))}},checkToken:C},ie=Object(f.b)((function(e){return{new_post:e.walls.selected,token:e.login.token}}),oe)(ce),ue=a(47),me=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user_settings_visibility:!1,user:{}},e.handleClickOutside=function(t){e.closeUserSettings()},e.toggleUserSettings=function(){e.setState({user_settings_visibility:!e.state.user_settings_visibility})},e.closeUserSettings=function(){e.setState({user_settings_visibility:!1})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.account_info;return s.a.createElement(n.Fragment,null,s.a.createElement("div",null,Object.keys(e).length?s.a.createElement("div",{className:"user-menu"},s.a.createElement("img",{className:"user-photo",onClick:this.toggleUserSettings,src:e.photo_200})):null,this.state.user_settings_visibility?s.a.createElement("div",{className:"user-settings"},s.a.createElement(U.b,{to:"/account"},s.a.createElement("button",null,"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442")),s.a.createElement("button",null,"\u0412\u044b\u0439\u0442\u0438")):null))}}]),a}(n.Component),pe={setCode:N,getToken:function(){return function(e){e({type:"GET_TOKEN",payload:null})}},getUser:I};me=Object(ue.a)(me);var de=me=Object(f.b)((function(e){return{code:e.login.code,token:e.login.token,account_info:e.login.account_info}}),pe)(me),fe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:{}},e.renderHead=function(){var t=e.props.account_info;return s.a.createElement("div",{className:"user-info"},s.a.createElement("img",{src:t.photo_200}),s.a.createElement("p",{className:"user-info_name"},t.first_name," ",t.last_name))},e.renderContent=function(){return null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.checkToken()}},{key:"render",value:function(){var e=this.props.account_info;return s.a.createElement(n.Fragment,null,Object.keys(e).length?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"background",style:{backgroundImage:'url("'+P.a+'")'}}),s.a.createElement("div",{className:"user-body"},s.a.createElement("div",{className:"user-navigation"},this.renderHead(),s.a.createElement("div",{className:"user-choices"},s.a.createElement("button",null,s.a.createElement("i",{class:"fas fa-balance-scale-right"}),"  \u041f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"),s.a.createElement("button",null,s.a.createElement("i",{class:"fas fa-cog"}),"  \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),s.a.createElement("button",null,s.a.createElement("i",{class:"fas fa-upload"}),"  \u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b"),s.a.createElement("button",null,s.a.createElement("i",{class:"fas fa-user-tie"}),"  \u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),s.a.createElement("button",null,s.a.createElement("i",{class:"fas fa-question-circle"}),"  \u0427\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0435\u0449\u0435.."))),s.a.createElement("div",{className:"user-content"},this.renderContent()))):null)}}]),a}(n.Component),he={checkToken:C},ge=Object(f.b)((function(e){return{token:e.login.token,account_info:e.login.account_info}}),he)(fe),_e=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement(f.a,{store:se},s.a.createElement(U.a,null,s.a.createElement(de,null),s.a.createElement(D.c,null,s.a.createElement(D.a,{exact:!0,path:"/",component:z}),s.a.createElement(D.a,{exact:!0,path:"/service-list",component:J}),s.a.createElement(D.a,{exact:!0,path:"/workspace",component:K}),s.a.createElement(D.a,{exact:!0,path:"/parser",component:ie}),s.a.createElement(D.a,{exact:!0,path:"/account",component:ge}))))}}]),a}(n.Component);l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(e,t,a){e.exports=a.p+"static/media/background.00b1933e.jpg"},48:function(e,t,a){e.exports=a(102)},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){}},[[48,1,2]]]);
//# sourceMappingURL=main.260981d3.chunk.js.map